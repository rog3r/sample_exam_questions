<script type="text/javascript">
    $(document).ready(function () {
        //fix grow onload
        turn_textareas_autogrow();
        convert();

    });

  function convert() {
    $(".convert-code-options").children().each(function() {
      $(this).html($(this).html().replace(/\[\s*\w*\s*code="xml hljs"\]/g,"<pre><code class='xml hljs'>"));
      $(this).html($(this).html().replace(/\[\s*\w*\s*code="cs hljs"\]/g,"<pre><code class='cs hljs'>"));
      $(this).html($(this).html().replace(/\[\s*\w*\s*code="css hljs"\]/g,"<pre><code class='css hljs'>"));
      $(this).html($(this).html().replace(/\[\s*\w*\s*code="javascript"\]/g,"<pre><code class='javascript'>"));
      $(this).html($(this).html().replace(/\[\/code\]/g,"</code></pre>"));
    });

    $(".convert-code-title").each(function() {
      $(this).html($(this).html().replace(/\[\s*\w*\s*code="xml hljs"\]/g,"<pre><code class='xml hljs'>"));
      $(this).html($(this).html().replace(/\[\s*\w*\s*code="css hljs"\]/g,"<pre><code class='css hljs'>"));
      $(this).html($(this).html().replace(/\[\s*\w*\s*code="javascript"\]/g,"<pre><code class='javascript'>"));
      $(this).html($(this).html().replace(/\[\/code\]/g,"</code></pre>"));
    });


    $('pre code').each(function (i, block) {
      hljs.highlightBlock(block);
    });
  }

    function turn_textareas_autogrow(){

        $('textarea.autogrow').each(function () {//fix grow onload
            autogrower($(this));
        });

        $('textarea.autogrow').bind('input keyup change cut paste', function () {
            autogrower($(this));
        });
    }

    function autogrower(element){
        $(element).css("height", 'auto');
        $(element).css("height", element[0].scrollHeight + 3 + 'px');
    }

//  function convert2() {
//      var sourceRegex = /\[source:[a-zA-z]+\]/
//      var langRegex = /:[a-zA-z]+\]/
//      //[code='cs']var num = 10;[/code]
//      $("ul.convert-code").children().each(function() {
//          oldText = $(this).text()
//
//          //[source:php] (match)-> :php] (replace)-> php
//          lang = oldText.match(langRegex)[0].replace(/[^a-zA-Z ]/g, "");
//
//          //[source:php] (replace)-> <code class: php>
//          step_1 = $(this).text(oldText.replace(/\[source:[a-zA-z]+\]/, "<pre><code class='hljs " + lang + "'>"));
//
//          //[source] (replace)-> </code>
//          $(this).text(step_1.text().replace(/\[source\]/, "</code></pre>"));
//      });
//
//      $('pre code').each(function (i, block) {
//          hljs.highlightBlock(block);
//      });
//  }


</script>