<script type="text/javascript">
    $(document).ready(function () {
        //fix grow onload
        turn_textareas_autogrow();

        $(".convert-code-title ").each(function () {
            convert($(this));
        });

        $(".convert-code-options ").each(function () {
            convert($(this));
        });

        $('pre code').each(function (i, block) {
            hljs.highlightBlock(block);
        });

    });

    function convert(element) {

        var original_content = element.html().toString();

        var new_content = original_content.replace(/\[\s*\w*\s*code="xml hljs"\]/g, "<pre><code class='xml hljs'>")
                .replace(/\[\s*\w*\s*code="cs hljs"\]/g, "<pre><code class='cs hljs'>")
                .replace(/\[\s*\w*\s*code="css hljs"\]/g, "<pre><code class='css hljs'>")
                .replace(/\[\s*\w*\s*code="javascript"\]/g, "<pre><code class='javascript'>")
                .replace(/\[\/code\]/g, "</code></pre>");

        element.html(new_content);
    }


    function turn_textareas_autogrow() {

        $('textarea.autogrow').each(function () {//fix grow onload
            autogrower($(this));
        });

        $('textarea.autogrow').bind('input keyup change cut paste', function () {
            autogrower($(this));
        });
    }

    function autogrower(element) {
        $(element).css("height", 'auto');
        $(element).css("height", element[0].scrollHeight + 3 + 'px');
    }


</script>